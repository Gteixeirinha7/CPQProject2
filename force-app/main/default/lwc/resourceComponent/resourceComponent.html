<template>
	<div class="main-resource">
		<lightning-layout multiple-rows horizontal-align="spread">

			<lightning-layout-item size="12" medium-device-size="5" large-device-size="3">
				<lightning-layout-item size="12" style=" display: flex; flex-direction: row; justify-content: space-evenly; align-items: stretch;">
					<div class="container__header-title">
						<c-structure-component 
							structure={selectedStructure}
							disabled-click="true">
						</c-structure-component>
					</div>
					<div class="container__menu">
						<template for:each={resourceList} for:item="resource" for:index="resourceIndex">
							<p key={resource.Id} data-index={resourceIndex} class={resource.class} onclick={onClickChooseResource} >
								{resource.Name}
							</p>
						</template>
					</div>
				</lightning-layout-item>
				<lightning-layout-item size="12" style=" display: flex; flex-direction: row; justify-content: space-evenly; align-items: stretch;">
					<template if:true={hasResourceSelected} for:each={selectedResourceList} for:item="item">
						<article key={item.Id} class="slds-card" style="height: 120px; margin-top: 10px">
							<div class="slds-card__header slds-grid">
								<header class="slds-media slds-media_center slds-has-flexi-truncate slds-var-p-around_xx-small" style="display: flex;flex-direction: column;">						
									<div class="slds-media__body">
										<h2 class="slds-card__header-title">
											{item.RecursoProduto__r.Name}
										</h2>
									</div>
									<div>
										<lightning-icon icon-name="action:new_child_case" size="small"></lightning-icon>
									</div>								
									<div class="slds-media__body">
										<h2 class="slds-card__header-title">
											{item.DescricaoRecurso__c}
										</h2>
									</div>
								</header>
							</div>
						</article>
					</template>
				</lightning-layout-item>
			</lightning-layout-item>

			<lightning-layout-item
				if:true={activatedResourceIndex}
				size="12" medium-device-size="7" large-device-size="9"
			>

				<template for:each={currentResourceActiveted.ComposicaoProduto__r} for:item="typeResource" for:index="typeIndex">
					<article if:true={typeResource.isShowType} key={typeResource.Id} class={typeResource.class}>
						<div class="slds-card__header slds-grid">
							<header class="slds-media slds-media_center slds-has-flexi-truncate slds-var-p-around_xx-small">
								<div class="slds-media__figure">
									<lightning-icon icon-name="action:new_child_case" size="small"></lightning-icon>
								</div>

								<div class="slds-media__body">
									<h2 class="slds-card__header-title">
										{typeResource.DescricaoRecurso__c}
									</h2>
								</div>

								<div class="slds-no-flex">
									<lightning-button
										if:false={typeResource.isSelected}
										data-index={typeIndex}
										label="Selecionar"
										variant="brand"
										onclick={onClickChooseResourceType}
									>
									</lightning-button>

									<lightning-button
										if:true={typeResource.isSelected}
										label="Selecionado"
										variant="brand"
										disabled
									>
									</lightning-button>
								</div>
							</header>
						</div>
					</article>
				</template>
			</lightning-layout-item>

		</lightning-layout>
	</div>
</template>